<%= render "govuk_publishing_components/components/details", {
  title: "View diff"
} do %>
  <%= sanitize(
    Diffy::Diff.new(
      JSON.pretty_generate(old_schema.as_json).to_s,
      JSON.pretty_generate(new_schema.as_json).to_s,
      allow_empty_diff: false,
    ).to_s(:html),
    tags: %w[div ul li ins strong del],
    attributes: %w[class]
  )
  %>
<% end %>

<%= render "govuk_publishing_components/components/details", {
  title: "View generated schema"
} do %>
  <pre><code><%= JSON.pretty_generate(new_schema.as_json) %></code></pre>
<% end %>

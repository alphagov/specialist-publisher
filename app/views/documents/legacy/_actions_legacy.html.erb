<% presenter = ActionsPresenter.new(@document, policy(@document.class)) %>

<div class="row">
  <div class="col-md-8">
    <h2>Actions</h2>

    <div class="well">
      <%= link_to "Edit document", presenter.edit_path, class: "btn btn-success" %>
    </div>

    <%= form_tag(presenter.publish_path, method: :post, class: 'panel panel-default') do %>
      <div class="panel-heading"><h3 class="panel-title">Publish document</h3></div>
      <div class="panel-body">
        <%= content_tag(:p, presenter.publish_text_legacy) %>

        <% if presenter.publish_button_visible? %>
          <button name="submit" class="btn btn-danger"
                  data-module="confirm"
                  data-message="<%= presenter.publish_alert %>"
                  data-disable-with="Publishing..." >Publish</button>
        <% end %>
      </div>
    <% end %>

    <%= form_tag(presenter.unpublish_path, method: :post, class: 'panel panel-default') do %>
      <div class="panel-heading"><h3 class="panel-title">Unpublish document</h3></div>
      <div class="panel-body">
        <%= content_tag(:p, presenter.unpublish_text_legacy) %>

        <% if presenter.unpublish_button_visible? %>
          <div class="form-group">
            <label for="alternative_path">Redirect to alternative GOV.UK content path. For example: /the-replacement-page</label>
            <input type="text" id="alternative_path" name="alternative_path" class="form-control">
          </div>

          <div class="form-group">
            <button name="submit" class="btn btn-warning"
                    data-module="confirm"
                    data-message="<%= presenter.unpublish_alert %>"
                    data-disable-with="Unpublishing..." >Unpublish document</button>
          </div>
        <% end %>
      </div>
    <% end %>

    <%= form_tag(presenter.discard_path, method: :post, class: 'panel panel-default') do %>
      <div class="panel-heading"><h3 class="panel-title">Discard draft</h3></div>
      <div class="panel-body">
        <%= content_tag(:p, presenter.discard_text) %>

        <% if presenter.discard_button_visible? %>
          <button name="submit" class="btn btn-warning"
                  data-module="confirm"
                  data-message="<%= presenter.discard_alert %>"
                  data-disable-with="Discarding draft..." >Discard draft</button>
        <% end %>
      </div>
    <% end %>
  </div>
</div>
